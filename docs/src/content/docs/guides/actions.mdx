---
title: Actions
description: How to communicate back and forth with your server
---

import { Code } from '@astrojs/starlight/components'

In mikr0, **actions** are server-side functions that can be invoked from the client-side, enabling seamless communication between your application and server. Actions are defined using the optional `actions` property in the `createComponent` function, where you specify an object containing your action functions.

### Defining Actions

Here's an example of how to define actions in a component:

<Code title='src/index.ts' code={`
import { createComponent } from 'mikr0/dev';
import { db } from './database';

export default createComponent({
  actions: {
    async getUserData(params: { userId: string }, context) {
      // Retrieve user data from the database
      const userData = await db.query('SELECT * FROM users WHERE id = $1', [params.userId]);
      return { userData: userData.rows[0] };
    },
  },
  // ... rest of the configuration
});
`} lang="ts" />

Each function in the `actions` object receives two parameters:

1. `params`: The parameters passed from the client.
2. `context`: The server context, which holds information like headers and other request-specific data.

### Calling Actions from Your Component

Use the `serverClient` module to call actions from your component. This module is automatically generated by mikr0 and provides functions corresponding to the actions you've defined.

<Code title='src/app.ts' code={`
import { serverClient } from 'mikr0/dev';

async function fetchData() {
  try {
    const result = await serverClient.getUserData({ userId });
    console.log('User Data:', result.userData);
  } catch (error) {
    console.error('Error fetching data:', error);
  }
}
`} lang="ts" />

### Best Practices

- **Validate Client Inputs**: Always validate the parameters received in your action functions to prevent security vulnerabilities.

- **Handle Errors Gracefully**: Implement error handling within your actions and when calling them to ensure your application can manage failures without crashing.

- **Use Asynchronous Functions**: Define actions as `async` functions to handle asynchronous operations like database queries effectively.

- **Secure Sensitive Data**: Be cautious about the data you send back to the client. Avoid exposing sensitive server-side information.

- **Maintain Consistent Naming Conventions**: Use clear and descriptive names for your actions to improve code readability and maintainability.